<div class="container-fluid gedf-wrapper">
  <div class="row">
    <img class="img-style"
      src="https://lh3.googleusercontent.com/hr_crs_themes/AGvgesT-byTjzcCRkRRHgOJX02-RpD29DkM6yJwlVsVm6eAUrDEL82M8cc3BP5yhFc1thclFRusBDIrn4tkSILvKDl5XcWfLXFOYPIQd3RitkxI2dFhKuygfAVU=s1280" />

    <div class="col-md-3">
      <div class="card">
        <div class="card-body">
          <div class="h5">Future</div>
          <div class="h7 text-muted">
            no homework to submit in the coming days!
          </div>
          <div class="h7">Show all</div>
        </div>
      </div>
    </div>

    <div class="col-md-6 gedf-main">
      <!--- \\\\\\\Post-->
      <div class="card gedf-card">
        <div class="card-header">
          <ul class="nav nav-tabs card-header-tabs" id="myTab" role="tablist">
            <li class="nav-item">
              <a class="nav-link active" id="posts-tab" data-toggle="tab" href="#posts" role="tab" aria-controls="posts"
                aria-selected="true">Make a publication</a>
            </li>
          
           

          </ul>
        </div>
        <div class="card-body">
          <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" id="posts" role="tabpanel" aria-labelledby="posts-tab">
              <div class="form-group">
                <textarea class="form-control" id="message" rows="3" placeholder="Make a publication"[(ngModel)]="post.postContent"></textarea>
              </div>

              <label>
                <input
                  type="file"
                  class="text-nowrap text-truncate"
                  (change)="selectFile($event)"
                />
              </label>
              <button
                class="btn btn-success btn-sm"
                [disabled]="!selectedFiles"
                (click)="upload()"
              >
                Upload
              </button>
              <div *ngIf="currentFileUpload" class="progress mt-2">
                <div
                  class="progress-bar progress-bar-info"
                  role="progressbar"
                  attr.aria-valuenow="{{ percentage }}"
                  aria-valuemin="0"
                  aria-valuemax="100"
                  [ngStyle]="{ width: percentage + '%' }"
                >
                  {{ percentage }}%
                </div>
              </div>
          <br>
          <br>

            
            </div>
            <div class="tab-pane fade" id="images" role="tabpanel" aria-labelledby="images-tab">
             
              <div class="py-4"></div>
            </div>
          </div>
          <div class="btn-toolbar justify-content-between">
            
            <div class="btn-group">
              
               <div class="row">
                
                <div class="col"><p>Options :</p></div>
                  <div class="col"><mat-slide-toggle class="toggstyle" ngModel name="enableWifi" 
                  [color]="v"(change)="onValChange($event)" > Private</mat-slide-toggle></div>
                  <div class="col"><mat-slide-toggle ngModel name="acceptTerms"class="toggstyle"  [color]="v"  (change)="onValChange1($event)" >Comment</mat-slide-toggle></div>
                  <div class="col"><mat-slide-toggle ngModel name="acceptTerms" class="toggstyle" [color]="v" (change)="onValChange3($event)" >important</mat-slide-toggle></div>
                  
                </div>
                  
              
              
            </div> 
<br>
<br>

            <div >
          
            <div class="btn-group">
              <button class="main-btn2" style="margin-left: 300px;;" (click)="addPost()">Post</button>
            </div>
          
          
    
          </div>
            
          </div>
        </div>
      </div>
      <!-- Post /////-->

      <!--- \\\\\\\Post-->
     
<!-- Post Begins -->
<section class="card mt-4" *ngFor="let i of posts; let index = index">
  <div class="border p-2">
    <!-- post header -->
    <div class="row m-0">
      <div class="">
        <a class="text-decoration-none" href="#">
          <img class="" src="https://cdn3.iconfinder.com/data/icons/avatars-round-flat/33/avat-01-512.png" width="50" height="50" alt="...">
        </a>
      </div>
      <div class="flex-grow-1 pl-2">
        <a class="text-decoration-none" href="#">
          <h2 class="text-capitalize h5 mb-0">{{username[index]}}</h2>
        </a> 
        <p class="small text-secondary m-0 mt-1">{{i.date }}</p>
      </div>
      
      <div>
        <button mat-button [matMenuTriggerFor]="menu" class="btn btn-link dropdown-toggle"
       >
        <i class="fa fa-ellipsis-h"></i>
      </button>
    <mat-menu #menu="matMenu">
      <button mat-menu-item (click)="updatepostpublic(i.idPost)">Public post</button>
      <button mat-menu-item (click)="AddPostDialog(i.idPost)">Edit post</button>
      <button mat-menu-item (click)="deletePost(i.idPost)">Delete post</button>
    </mat-menu>

      </div>
    </div>
    <!-- post body -->
    <div class="">
      <p class="my-2">
        {{i.postContent}}
      </p>


      <div *ngIf="imageisnull(i.typefile)">
        <img class="profile-pic imagepost" [src]="i.typefile"  alt=".">
       </div> 
       <div *ngIf="videoisnull(i.typefile)">
   
        <video controls width="500">
       
         <source [src]="i.typefile">
       
       </video></div>

       <div *ngIf="pdfisnull(i.typefile)">
       <app-pdfviewer [path]="i.typefile"></app-pdfviewer>
       </div>



        
      <!-- <div *ngIf="i.file!=null" >

        <div *ngIf="i.test">
      
          <img class="profile-pic imagepost"  [src]="'data:image/jpeg;base64,'+i.file"  alt=".">
         </div>
         
         <div *ngIf="!i.test && i.file!=null">
         
          <video controls width="500">
         
           <source [src]="'data:video/mp4;base64,'+i.file">
         
         </video></div>
         
          
     </div> -->

    </div >
    <hr class="my-1">
    <!-- post footer begins -->
    <footer class="">
      <!-- post actions -->
      <div class="">
        <ul class="list-group list-group-horizontal">
          
          <li class="list-group-item flex-fill text-center p-0 px-lg-2 border border-right-0 border-top-0 border-bottom-0">
            <a class="small text-decoration-none" data-toggle="collapse" href="#collapseExample{{i.idPost}}" role="button" aria-expanded="false" aria-controls="collapseExample">
              <i class="fa fa-comment-alt" (click)="getComment(i.idPost,index)"> Comment</i> 
            </a> 
          </li>
          
        </ul>
      </div>
      

      <!-- collapsed comments begins -->
      <div class="collapse" id="collapseExample{{i.idPost}}" >
        <div class="card border border-right-0 border-left-0 border-bottom-0 mt-1">
          <!-- new comment form -->
          <section class="mt-3" >
            <form action="">
              <div class="input-group input-group">
                <input type="text" class="form-control" [disabled]="i.comment" name="comment"[(ngModel)]="commentA.commentContent" placeholder="Write Comment" aria-label="Recipient's username" aria-describedby="basic-addon2">
                <div class="input-group-append">
                  <button class="main-btn2" role="button" [disabled]="i.comment" (click)="addComment(i.idPost,index)">Comment</button>
                </div>
              </div>
            </form>
          </section>
          <!-- comment card bgins -->
         
          <section  *ngFor="let j of posts[index].comments;" >
            <div class="card p-2 mt-3">
              <!-- comment header -->
              <div class="d-flex" >
                <div class="">
                  <a class="text-decoration-none" href="#">
                    <img class="profile-pic" src="https://cdn3.iconfinder.com/data/icons/avatars-round-flat/33/avat-01-512.png" width="40" height="40" alt="...">
                  </a>
                </div>
                <div class="flex-grow-1 pl-2">
                  <a class="text-decoration-none text-capitalize h6 m-0" href="#">{{j.displayName}}</a>
                  <p class="small m-0 text-muted">{{j.date}}</p>
                </div>
                <div >
                  
                  <div>
                    <button mat-button [matMenuTriggerFor]="menu1" class="btn btn-link dropdown-toggle"
                   >
                    <i class="fa fa-ellipsis-h"></i>
                  </button>
                <mat-menu #menu1="matMenu">
                  <button mat-menu-item >Edit comment</button>
                  <button mat-menu-item  (click)="deleteCommentById(j.idComment,index,i.idPost)" >Delete comment</button>
                </mat-menu>
      
                  </div>
                </div>
              </div>
              <!-- comment header -->
              <!-- comment body -->
              <div class="card-body p-0" >
                <p class="card-text h7 mb-1"> {{j.commentContent}}</p>
                <a class="card-link small" href="#">
                  
                </a>
              </div>
            </div>
          </section>
         
          <!-- comment card ends -->

        </div>
      </div>
      <!-- collapsed comments ends -->
    </footer>
    <!-- post footer ends -->
  </div>
</section>
<!-- Post Ends -->
    </div>
  </div>
</div>





